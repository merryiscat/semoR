# 현재 이슈 및 우선순위

## 🚨 현재 알려진 이슈

### 🔴 높은 우선순위
#### 1. 요일별 반복 알람 자동 해제 미작동
- **문제**: "한 번만" 알람이 실행 후 자동으로 OFF 되지 않음
- **영향**: 사용자 경험 저하, 불필요한 반복 알람 발생
- **우선순위**: 즉시 수정 필요
- **관련 파일**: AlarmReceiver, AlarmManager 관련 클래스

### 🟡 중간 우선순위
#### 2. 코골이 감지 효율성 문제
- **문제**: 70% 시간대에서 코골이 감지 놓침
- **위치**: `SnoringDetector.kt:33-40`
- **영향**: 수면 체크 기능의 정확도 저하
- **해결 방안**: 연속 모니터링 또는 감지 간격 단축 검토

#### 3. 타이머 볼륨바 색상 표시 오류
- **문제**: 볼륨 0일 때 그레이 색상으로 표시되지 않음
- **영향**: UI 일관성 저하
- **해결**: 볼륨 상태에 따른 색상 로직 수정

## 📊 개발 현황 (90% 완성)

### ✅ 완성된 기능 (100%)
- **🔔 기본 알람**: NotificationAlarmManager로 Android 14+ 백그라운드 제약 완전 우회
- **⏱️ 커스텀 타이머**: 사용자 정의 카테고리, 실시간 카운트다운, 백그라운드 실행
- **🎨 브랜드 UI**: Material3 + 네온블루/딥그레이 조합
- **🏗️ 아키텍처**: Room Database v10, MVVM + Hilt, 6개 핵심 엔티티

### 🚧 진행 중
- **🌙 수면 체크 기능** (75%): SleepRecord 엔티티, 기본 UI 완성
- **📊 리포트 기능** (40%): 탭 구조 완성, 데이터 수집 로직 구현 필요

## 🔍 디버깅 시스템

### 수면 이벤트 로그 시스템
- **로그 위치**: `/Android/data/com.semo.alarm/files/SemoAlarm_SleepLogs/`
- **파일 형식**: `YYYY-MM-DD_sleep_YYYY-MM-DD_HH-mm-ss.log`
- **내용**: 코골이 감지 과정, 오디오 녹음, 감지 상태 변화, 시스템 상태

### 디버깅 가이드
1. **앱에서 수면 체크 시작** → `SESSION_START` 로그 생성
2. **밤새 방치** → 5초마다 `DETECTION_ANALYSIS` 로그 생성
3. **다음날 확인** → 로그 파일에서 실제 감지 과정 분석
4. **문제 진단**: `ERROR` 태그로 권한, 녹음, 분석 오류 확인

## 🚀 다음 개발 계획

### 단기 목표 (1-2주)
1. **요일별 반복 알람 자동 해제** 버그 수정
2. **코골이 감지 효율성** 개선

### 중기 목표 (1개월)
1. **수면 체크 완성** → MPAndroidChart로 7일/30일 패턴 시각화
2. **리포트 데이터 수집** → 실사용 통계 및 개인화된 인사이트

### 장기 목표 (2-3개월)
1. **코골이 감지 최적화** → 연속 모니터링 또는 간격 단축
2. **고급 수면 분석** 기능 추가
3. **사용자 피드백** 반영한 UI/UX 개선